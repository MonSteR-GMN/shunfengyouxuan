"use strict";function draw(t){var o=$("#canvas").width(),n=$("#canvas").height(),a=document.getElementById("canvas"),e=a.getContext("2d");a.width=o,a.height=n;for(var r="a,b,c,d,e,f,g,h,i,j,k,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),l=r.length,i=0;i<4;i++){var s=Math.floor(Math.random()*l),c=Math.random()-.5,d=r[s];t[i]=d.toLowerCase();var u=10+20*i,p=20+8*Math.random();e.font="bold 23px 微软雅黑",e.translate(u,p),e.rotate(c),e.fillStyle=randomColor(),e.fillText(d,0,0),e.rotate(-c),e.translate(-u,-p)}for(i=0;i<=5;i++)e.strokeStyle=randomColor(),e.beginPath(),e.moveTo(Math.random()*o,Math.random()*n),e.lineTo(Math.random()*o,Math.random()*n),e.stroke();for(i=0;i<=30;i++){e.strokeStyle=randomColor(),e.beginPath();u=Math.random()*o,p=Math.random()*n;e.moveTo(u,p),e.lineTo(u+1,p+1),e.stroke()}}function randomColor(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}jQuery(function(n){var o=n("#username"),a=n("#password"),t=n("#confirm_pwd"),e=n(".sign .tip"),r=n(".sign .pwdtip"),l=n(".sign .pwdcontip"),i=!1,s=!1,c=!1,d=n(".sign span .checkbox"),u=!1,p=n("#regBtn"),f=n(".sign .textbox2"),h=n(".sign .yzmtip"),v=[],m=!1;function x(){i&&s&&c&&m&&u?p.attr("disabled",!1):p.attr("disabled",!0)}draw(v),o.val(""),a.val(""),t.val(""),f.val(""),o.blur(function(){var t=n(this).val();/^1(3|4|5|7|8)\d{9}$/.test(t)?n.get("../api/signin1.php",{uname:t},function(t){i=t?(e.text(""),!0):(e.text("该用户名已被注册").css("color","red"),!1)}):e.text("请输入正确的手机号码").css("color","red"),x()}),a.on("input",function(){var t=a.val();/^\w{6,20}$/.test(t)?(s=!0,r.text("6-20位字符，可使用字母、数字、下划线。不建议使用纯数字或字母组合。").css({color:"#000",position:"absolute",left:"445px",top:"115px"})):(s=!1,r.text("密码只能为6-20位字母、数字下划线组合。").css({color:"red",position:"absolute",left:"445px",top:"125px"})),x()}),t.focus(function(){l.text("请再次输入密码").css("color","#000"),t.on("input",function(){$_upwdcon=t.val(),c=$_upwdcon==a.val()?(l.text(""),!0):(l.text("两次输入不一致，请重新输入").css("color","red"),!1)}),x()}),n("#canvas").on("click",function(){draw(v),console.log(v)}),f.focus(function(){h.text("请输入验证码！")}),f.blur(function(){var t=n(".sign .input-val").val().toLowerCase(),o=v.join("");""==t?(m=!1,h.text("")):t==o?(m=!0,h.text("正确").css("color","#000")):(m=!1,h.text("错误").css("color","red"),n(".input-val").val("")),x()}),d.click(function(){u=!!d.is(":checked"),x()}),p.on("click",function(t){t.preventDefault(),n.post("../api/signin2.php",{uname:o.val(),upwd:a.val()},function(t){"登录成功"==t&&(location.href="../index.html",window.localStorage.uname=o.val(),window.localStorage.upwd=a.val())})})});